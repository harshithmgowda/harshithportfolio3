<div id="preloader">
    <div class="loader-text">
        <span class="loader-bracket">&lt;</span> HG <span class="loader-bracket">/&gt;</span>
    </div>
</div>

<header id="header" class="bg-black/80 backdrop-blur-sm fixed top-0 left-0 right-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
        <a href="index.html#home" class="text-xl font-semibold hover:text-primary-red transition-colors duration-300">
            <span class="primary-red">&lt;</span>HarshithGowdaM <span class="primary-red">/&gt;</span>
        </a>
        <nav class="hidden md:flex space-x-8 items-center">
            <a href="index.html#home" class="nav-link text-sm">Home</a>
            <a href="index.html#about" class="nav-link text-sm">About</a>
            <a href="index.html#skills" class="nav-link text-sm">Skills</a>
            <a href="education.html" class="nav-link text-sm active">Education</a>
            <a href="index.html#contact" class="nav-link text-sm">Contact</a>
        </nav>
        <button id="mobile-menu-btn" class="md:hidden text-2xl z-50"><i class="fas fa-bars"></i></button>
    </div>
    <div id="mobile-menu" class="hidden md:hidden absolute top-0 left-0 w-full h-screen bg-black/95">
        <nav class="flex flex-col items-center justify-center h-full space-y-8">
            <a href="index.html#home" class="nav-link text-lg">Home</a>
            <a href="index.html#about" class="nav-link text-lg">About</a>
            <a href="index.html#skills" class="nav-link text-lg">Skills</a>
            <a href="education.html" class="nav-link text-lg">Education</a>
            <a href="index.html#contact" class="nav-link text-lg">Contact</a>
        </nav>
    </div>
</header>

<main>
    <section id="education-banner" class="relative h-[50vh] flex items-center justify-center text-white bg-cover bg-center" style="background-image: url('https://jssstuniv.in/assets/img/jssstu-2.jpg');">
        <div class="absolute inset-0 bg-black/60 z-1"></div>
        <canvas id="raining-code-canvas"></canvas>
        <div class="relative z-10 text-center p-6">
            <h1 class="text-4xl md:text-6xl font-bold" style="color: #c9a6ff;">Educational Background</h1>
            <p class="mt-4 text-lg md:text-xl italic text-gray-300">"An investment in knowledge pays the best interest." – Benjamin Franklin</p>
        </div>
    </section>

    <section id="education-timeline" class="py-20 md:py-28 bg-[#111]">
        <div class="container mx-auto px-6">
            <div class="timeline max-w-4xl mx-auto">

                <div class="timeline-item">
                    <div class="glass-card p-6 md:p-8">
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <img src="college-main.jpg" alt="SJCE College Photo" class="w-full md:w-1/3 h-auto rounded-lg shadow-lg object-cover">
                            <div class="w-full md:w-2/3">
                                <p class="text-sm primary-red font-medium mb-1">2024 — 2028</p>
                                <h3 class="text-2xl font-semibold text-white mb-2">Bachelor of Engineering, CSE</h3>
                                <p class="text-lg text-gray-300">Sri Jayachamarajendra College of Engineering (SJCE), JSS STU, Mysuru</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="glass-card p-6 md:p-8">
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <img src="college-2.jpg" alt="Shanthinikethan PU College Photo" class="w-full md:w-1/3 h-auto rounded-lg shadow-lg object-cover">
                            <div class="w-full md:w-2/3">
                                <p class="text-sm primary-red font-medium mb-1">6th — 12th</p>
                                <h3 class="text-2xl font-semibold text-white mb-2">Pre-University Education</h3>
                                <p class="text-lg text-gray-300">Shanthinikethan PU College, Ramanagara</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="glass-card p-6 md:p-8">
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <img src="college-3.jpg" alt="BGS Public School Photo" class="w-full md:w-1/3 h-auto rounded-lg shadow-lg object-cover">
                            <div class="w-full md:w-2/3">
                                <p class="text-sm primary-red font-medium mb-1">1st — 5th</p>
                                <h3 class="text-2xl font-semibold text-white mb-2">Primary School Education</h3>
                                <p class="text-lg text-gray-300">BGS Public School, Bidadi</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>
</main>

<footer class="bg-black py-10">
    <div class="container mx-auto px-6 text-center text-gray-400">
        <div class="mb-6 flex justify-center space-x-8">
            <a href="https://www.linkedin.com/in/harshith-gowda-m-391205332/" target="_blank" rel="noopener noreferrer" class="social-icon text-3xl text-gray-400 hover:scale-125 transition-all duration-300"><i class="fab fa-linkedin"></i></a>
            <a href="https://www.instagram.com/harshith.gowda_m284/?__pwa=1" target="_blank" rel="noopener noreferrer" class="social-icon text-3xl text-gray-400 hover:scale-125 transition-all duration-300"><i class="fab fa-instagram"></i></a>
        </div>
        <p class="text-sm text-gray-500">&copy; 2024 Harshith Gowda M. Designed with <i class="fas fa-heart primary-red"></i> and code.</p>
    </div>
</footer>

<script>
    // Preloader
    window.addEventListener('load', () => {
        const preloader = document.getElementById('preloader');
        preloader.style.opacity = '0';
        setTimeout(() => { preloader.style.display = 'none'; }, 500);
    });

    // Interactive Cursor Glow
    window.addEventListener('mousemove', e => {
        document.documentElement.style.setProperty('--mouse-x', e.clientX + 'px');
        document.documentElement.style.setProperty('--mouse-y', e.clientY + 'px');
    });

    // Header scroll effect
    window.addEventListener('scroll', () => {
        const header = document.getElementById('header');
        header.classList.toggle('scrolled', window.scrollY > 50);
    });

    // Mobile Menu
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuIcon = mobileMenuBtn.querySelector('i');
    
    mobileMenuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        mobileMenuIcon.classList.toggle('fa-bars', mobileMenu.classList.contains('hidden'));
        mobileMenuIcon.classList.toggle('fa-times', !mobileMenu.classList.contains('hidden'));
    });

    // --- NEW: Scroll Reveal Animation for Timeline Items ---
    const timelineItems = document.querySelectorAll('.timeline-item');
    const observerOptions = {
        root: null, // Use the viewport as the container
        rootMargin: '0px',
        threshold: 0.1 // Trigger when at least 10% of the item is visible
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            // When an element becomes visible in the viewport
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                // We can stop observing it after it has become visible
                // so the animation doesn't re-trigger.
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Start observing each timeline item
    timelineItems.forEach(item => {
        observer.observe(item);
    });


    // --- Extravagant Hover Effect for Education Cards ---
    document.querySelectorAll('.glass-card').forEach(card => {
        const maxRotate = 8; // Max rotation in degrees, adjust for more/less effect

        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const width = rect.width;
            const height = rect.height;

            // Calculate rotation values based on mouse position inside the card
            const rotateX = ((y / height) - 0.5) * -1 * maxRotate;
            const rotateY = ((x / width) - 0.5) * maxRotate;

            // Apply the 3D transform for the tilt effect with a slight scale-up
            // A quick transition is used while the mouse is moving over the card
            card.style.transition = 'transform 0.1s ease-out';
            card.style.transform = `perspective(1500px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.04, 1.04, 1.04)`;

            // Update the CSS custom variables for the spotlight's position
            card.style.setProperty('--mouse-x-card', `${x}px`);
            card.style.setProperty('--mouse-y-card', `${y}px`);
        });

        card.addEventListener('mouseleave', () => {
            // Smoothly reset the card's transformation when the mouse leaves
            // A more elastic transition gives it a nice feel as it settles
            card.style.transition = 'transform 0.6s cubic-bezier(0.23, 1, 0.32, 1)';
            card.style.transform = 'perspective(1500px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)';
        });
    });

    // --- Raining Code Animation ---
    const canvas = document.getElementById('raining-code-canvas');
    if (canvas) {
        const ctx = canvas.getContext('2d');
        const banner = document.getElementById('education-banner');
        
        let animationFrameId;
        const fontSize = 16;
        let columns;
        const drops = [];
        const codeChars = "01<>/{}[]+=-*()&^%$#@!~";
        const chars = codeChars.split('');

        function setupAndResize() {
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
            }
            const dpr = window.devicePixelRatio || 1;
            canvas.width = banner.clientWidth * dpr;
            canvas.height = banner.clientHeight * dpr;
            canvas.style.width = banner.clientWidth + 'px';
            canvas.style.height = banner.clientHeight + 'px';
            ctx.scale(dpr, dpr);
            columns = Math.floor(banner.clientWidth / fontSize);
            drops.length = 0;
            for (let i = 0; i < columns; i++) {
                drops[i] = 1;
            }
        }

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, banner.clientWidth, banner.clientHeight);
            const primaryColor = getComputedStyle(document.documentElement).getPropertyValue('--primary-red').trim() || '#E50914';
            const highlightColor = '#ffffff';
            ctx.font = fontSize + 'px IBM Plex Mono';

            for (let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                ctx.shadowBlur = 0;
                if (drops[i] === 1 && Math.random() > 0.985) {
                    ctx.fillStyle = highlightColor;
                    ctx.shadowColor = highlightColor;
                    ctx.shadowBlur = 10;
                } else {
                    ctx.fillStyle = primaryColor;
                }
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if (drops[i] * fontSize > banner.clientHeight && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }
        
        function animate() {
            draw();
            animationFrameId = requestAnimationFrame(animate);
        }
        
        const preloader = document.getElementById('preloader');
        const preloaderObserver = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.attributeName === "style" && preloader.style.display === 'none') {
                    setupAndResize();
                    animate();
                    preloaderObserver.disconnect();
                }
            });
        });
        preloaderObserver.observe(preloader, { attributes: true });

        window.addEventListener('resize', () => {
            setupAndResize();
        });
    }
</script>
